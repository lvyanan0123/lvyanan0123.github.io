# 常用命令

## 切nginx

```shell
cd /data/server/nginx/conf/vhosts/
vim python.service.8080.conf
# 改配置
proxy_pass http://tornado_giftcenter; --> proxy_pass http://go_giftcenter;

cd /data/server/nginx/conf/upstream
# 复制
cp tornado_giftcenter.conf  go_giftcenter.conf
# 改端口
vim go_giftcenter.conf
# 重启nginx
Cd /data/server/nginx
sudo ./sbin/nginx -s reload
```

## uc-重复库名-确认列表

```shell
cd /data/www
grep -ER --include='*.py' "uc.cocoonPush_mysql.tcp" ./*
grep -ER --include='*.py' '/order/dmp/vpOrderSubmit' *
# 看在哪个项目继续找,如果model里已经没有db=库名 那就说明不用了
```

## docke挂了
```shell
# 先重启
ps -ef | grep smartbus
 docker exec -it www_smartbus_1 bash
# supervisorctl -c supervisord_gray.conf
python init.py --runmode=gray
supervisorctl -c supervisord_gray.conf restart all
supervisorctl -c supervisord_gray.conf
# 重启web
restart web:*
# 重启队列
restart queue:*
# 运行脚本
python tools/consum_pk.py --runmode=gray
```